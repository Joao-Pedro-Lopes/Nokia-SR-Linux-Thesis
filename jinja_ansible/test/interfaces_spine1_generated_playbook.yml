# Jinja template
---
- name: Add interface
  hosts: clab-test-spine1
  gather_facts: false
  tasks:
    
    - name: Set p2p interface configuration - spine1
      nokia.srlinux.config:
        update:
          - path: /interface[name=ethernet-1/1]
            value:
              admin-state: enable
              description: "interface description set with Ansible"
          - path: /interface[name=ethernet-1/1]/subinterface[index=0]
            value:
              admin-state: enable
              description: "subinterface description set with Ansible"
          - path: /interface[name=ethernet-1/1]/subinterface[index=0]/ipv4/address[ip-prefix=192.168.11.2/30]

      register: set_response_p2p_1

    - debug:
        var: set_response_p2p_1
    
    - name: Set p2p interface configuration - spine1
      nokia.srlinux.config:
        update:
          - path: /interface[name=ethernet-1/2]
            value:
              admin-state: enable
              description: "interface description set with Ansible"
          - path: /interface[name=ethernet-1/2]/subinterface[index=0]
            value:
              admin-state: enable
              description: "subinterface description set with Ansible"
          - path: /interface[name=ethernet-1/2]/subinterface[index=0]/ipv4/address[ip-prefix=192.168.11.6/30]

      register: set_response_p2p_2

    - debug:
        var: set_response_p2p_2
    
    - name: Set loopback interface configuration - spine1
      nokia.srlinux.config:
        update:
          - path: /interface[name=system0]
            value:
              admin-state: enable
              description: "interface description set with Ansible"
          - path: /interface[name=system0]/subinterface[index=0]
            value:
              admin-state: enable
              description: "subinterface description set with Ansible"
          - path: /interface[name=system0]/subinterface[index=0]/ipv4/address[ip-prefix=10.0.0.2/32]

      register: set_response_loopback

    - debug:
        var: set_response_loopback